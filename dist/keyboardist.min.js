!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Keyboardist=e()}(this,function(){"use strict";var t=function(t){var e=(t.target||t.nativeEvent.target).tagName;return"BUTTON"===e||"INPUT"===e||"SELECT"===e||"TEXTAREA"===e},e={ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",ControlLeft:"control",ControlRight:"control"},n=function(t){return"code"in t?!!e[t.code]:16===t.which||17===t.which||18===t.which||91===t.which},o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"},r=function(t){var e="",n=[];if("code"in t)e=o[t.code]?o[t.code]:t.code;else{var r=t.which;e=String.fromCharCode(r).toLowerCase(),o[r]&&(e=o[r])}return t.altKey&&n.push("Alt"),t.shiftKey&&n.push("Shift"),t.ctrlKey&&n.push("Ctrl"),n.push(e),n.join("+")},i=function(t){console.log(":keyboard event:",t)};return function(){var e={},o=null;return document.addEventListener(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"keydown",function(i){if(!n(i)&&!t(i)){var a=r(i),c=e[a.toLowerCase()]||[];"function"==typeof o&&o(a,c.length>0,i),c.length&&i.preventDefault();for(var f=!0,h=c.length-1;h>=0&&(c[h]&&(f=c[h]()),!1!==f);h--);}}),{subscribe:function(t,n){return(t=t.toLowerCase()).replace(/\s/,""),void 0===e[t]&&(e[t]=[]),e[t].push(n),{unsubscribe:function(){var o=e[t].indexOf(n);e[t].splice(o,1)}}},setMonitor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o=!0===t?i:t}}}});
